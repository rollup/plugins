# Snapshot report for `test/test.js`

The actual snapshot is saved in `test.js.snap`.

Generated by [AVA](https://avajs.dev).

## produces optimized code when importing esm with a known default export

> Snapshot 1

    `'use strict';␊
    ␊
    var require$$0 = "default";␊
    ␊
    var main = require$$0;␊
    ␊
    module.exports = main;␊
    `

## produces optimized code when importing esm without a default export

> Snapshot 1

    `'use strict';␊
    ␊
    function getAugmentedNamespace(n) {␊
      var f = n.default;␊
    	if (typeof f == "function") {␊
    		var a = function () {␊
    			return f.apply(this, arguments);␊
    		};␊
    		a.prototype = f.prototype;␊
      } else a = {};␊
      Object.defineProperty(a, '__esModule', {value: true});␊
    	Object.keys(n).forEach(function (k) {␊
    		var d = Object.getOwnPropertyDescriptor(n, k);␊
    		Object.defineProperty(a, k, d.get ? d : {␊
    			enumerable: true,␊
    			get: function () {␊
    				return n[k];␊
    			}␊
    		});␊
    	});␊
    	return a;␊
    }␊
    ␊
    const value = "value";␊
    ␊
    var esm = /*#__PURE__*/Object.freeze({␊
    	__proto__: null,␊
    	value: value␊
    });␊
    ␊
    var require$$0 = /*@__PURE__*/getAugmentedNamespace(esm);␊
    ␊
    var main = require$$0;␊
    ␊
    module.exports = main;␊
    `

## handles array destructuring assignment

> Snapshot 1

    `'use strict';␊
    ␊
    Object.defineProperty(exports, '__esModule', { value: true });␊
    ␊
    var main = {};␊
    ␊
    /* eslint-disable */␊
    ␊
    function shuffleArray(array) {␊
      for (let i = array.length - 1; i > 0; i--) {␊
        const j = Math.floor(Math.random() * (i + 1));␊
        [array[i], array[j]] = [array[j], array[i]];␊
      }␊
    }␊
    ␊
    var shuffleArray_1 = main.shuffleArray = shuffleArray;␊
    ␊
    exports["default"] = main;␊
    exports.shuffleArray = shuffleArray_1;␊
    `

## can spread an object into module.exports

> Snapshot 1

    `'use strict';␊
    ␊
    const obj = {␊
      a: 'b',␊
      b: 'c'␊
    };␊
    ␊
    var main = {␊
      ...obj␊
    };␊
    ␊
    module.exports = main;␊
    `

## does not transform typeof exports for mixed modules

> Snapshot 1

    `var foo$1 = 21;␊
    ␊
    const foo = foo$1;␊
    ␊
    if (typeof exports !== 'undefined') {␊
      throw new Error('There should be no global exports in an ES module');␊
    }␊
    ␊
    export { foo as default };␊
    `

## updates all relevant modules when using the cache and the wrapping of a module changes

> Snapshot 1

    `'use strict';␊
    ␊
    var first = {};␊
    ␊
    var second = {};␊
    ␊
    second.second = 'second';␊
    ␊
    first.first = 'first'; first.first += second.second;␊
    ␊
    var main = 'main' + first.first;␊
    ␊
    module.exports = main;␊
    `

> Snapshot 2

    `'use strict';␊
    ␊
    var first = {};␊
    ␊
    var second = {};␊
    ␊
    var hasRequiredSecond;␊
    ␊
    function requireSecond () {␊
    	if (hasRequiredSecond) return second;␊
    	hasRequiredSecond = 1;␊
    	second.second = 'second'; second.second += requireFirst().first;␊
    	return second;␊
    }␊
    ␊
    var hasRequiredFirst;␊
    ␊
    function requireFirst () {␊
    	if (hasRequiredFirst) return first;␊
    	hasRequiredFirst = 1;␊
    	first.first = 'first'; first.first += requireSecond().second;␊
    	return first;␊
    }␊
    ␊
    var main = 'main' + requireFirst().first;␊
    ␊
    module.exports = main;␊
    `

> Snapshot 3

    `'use strict';␊
    ␊
    function getAugmentedNamespace(n) {␊
      var f = n.default;␊
    	if (typeof f == "function") {␊
    		var a = function () {␊
    			return f.apply(this, arguments);␊
    		};␊
    		a.prototype = f.prototype;␊
      } else a = {};␊
      Object.defineProperty(a, '__esModule', {value: true});␊
    	Object.keys(n).forEach(function (k) {␊
    		var d = Object.getOwnPropertyDescriptor(n, k);␊
    		Object.defineProperty(a, k, d.get ? d : {␊
    			enumerable: true,␊
    			get: function () {␊
    				return n[k];␊
    			}␊
    		});␊
    	});␊
    	return a;␊
    }␊
    ␊
    var second = {};␊
    ␊
    var hasRequiredSecond;␊
    ␊
    function requireSecond () {␊
    	if (hasRequiredSecond) return second;␊
    	hasRequiredSecond = 1;␊
    	second.second = 'second';␊
    	return second;␊
    }␊
    ␊
    let first = 'first'; if (Math.random() < 1) first += requireSecond().second;␊
    ␊
    var first$1 = /*#__PURE__*/Object.freeze({␊
    	__proto__: null,␊
    	get first () { return first; }␊
    });␊
    ␊
    var require$$0 = /*@__PURE__*/getAugmentedNamespace(first$1);␊
    ␊
    var main = 'main' + require$$0.first;␊
    ␊
    module.exports = main;␊
    `

## updates mixed modules when using the cache and the wrapping of a module changes

> Snapshot 1

    `'use strict';␊
    ␊
    Object.defineProperty(exports, '__esModule', { value: true });␊
    ␊
    var first = {};␊
    ␊
    first.first = 'first';␊
    ␊
    const main = 'main'; const result = first.first;␊
    ␊
    exports.main = main;␊
    exports.result = result;␊
    `

> Snapshot 2

    `'use strict';␊
    ␊
    Object.defineProperty(exports, '__esModule', { value: true });␊
    ␊
    var main$1 = /*#__PURE__*/Object.freeze({␊
    	__proto__: null,␊
    	get main () { return main; },␊
    	get result () { return result; }␊
    });␊
    ␊
    function getAugmentedNamespace(n) {␊
      var f = n.default;␊
    	if (typeof f == "function") {␊
    		var a = function () {␊
    			return f.apply(this, arguments);␊
    		};␊
    		a.prototype = f.prototype;␊
      } else a = {};␊
      Object.defineProperty(a, '__esModule', {value: true});␊
    	Object.keys(n).forEach(function (k) {␊
    		var d = Object.getOwnPropertyDescriptor(n, k);␊
    		Object.defineProperty(a, k, d.get ? d : {␊
    			enumerable: true,␊
    			get: function () {␊
    				return n[k];␊
    			}␊
    		});␊
    	});␊
    	return a;␊
    }␊
    ␊
    var first = {};␊
    ␊
    var require$$0 = /*@__PURE__*/getAugmentedNamespace(main$1);␊
    ␊
    var hasRequiredFirst;␊
    ␊
    function requireFirst () {␊
    	if (hasRequiredFirst) return first;␊
    	hasRequiredFirst = 1;␊
    	first.first = 'first' + require$$0.main;␊
    	return first;␊
    }␊
    ␊
    const main = 'main'; const result = requireFirst().first;␊
    ␊
    exports.main = main;␊
    exports.result = result;␊
    `
